Site.productSlide={};(function(K,U,o){var y,L=-1,V,l,ap,al=null,g="",ac="",H,Q,b,u,x,s,j,E,h=82;U.data={};U.dom={};var Y=Fai.top._lcid==2052||Fai.top._lcid==1028;function F(){var ar=[];ar.push('<div class="fk-slideForProduct" id="fk-productSlidePanel" style="display:none;">');ar.push('	<div class="f-contentBg J_contentBg"></div>');ar.push('	<div class="f-content J_content" id="fk-productSlideContent">');ar.push('		<div class="f-innerContent">');ad(ar);ar.push("		</div>");ar.push('		<a href="javascript:;" class="f-turnLeft J_turnLeft" onclick="return false;" hidefocus="true">向右</a>');ar.push('		<a href="javascript:;" class="f-turnRight J_turnRight" onclick="return false;" hidefocus="true">向左</a>');ar.push('		<a href="javascript:;" class="f-close J_close" onclick="return false;" title="关闭" hidefocus="true">关闭</a>');ar.push("	</div>");ar.push("</div>");return ar}function ad(ar){ar.push('<div class="f-multiContent J_multiContent">');J(ar);ar.push("</div>");ar.push('<div class="f-albumsContent J_albumsContent">');C(ar);ar.push("</div>")}function J(ar){ar.push('<div class="f-multiContent-left J_multiContentLeft">');I(ar);ar.push("</div>");ar.push('<div class="f-multiContent-right J_multiContentRight">');Z(ar);ar.push("</div>")}function I(ar){ar.push('<div class="f-productPicContent J_productPicContent">');ar.push('	<div class="f-productImg J_productImg">');ar.push('		<div class="f-productImgLoading"></div>');ar.push("	</div>");ar.push('	<div class="f-productImgGroup J_productImgGroup" style="display:none;">');ar.push('		<div class="f-productImgGroupBg"></div>');ar.push('		<div class="f-imgListWrap J_imgListWrap">');ar.push("		</div>");ar.push('		<a href="javascript:;" onclick="return false;" class="f-groupLeft J_groupLeft" hidefocus="true">向左</a>');ar.push('		<a href="javascript:;" onclick="return false;" class="f-groupRight J_groupRight" hidefocus="true">向右</a>');ar.push("	</div>");ar.push("</div>");ar.push('<div class="f-shareContent J_shareContent">');ar.push("</div>")}function Z(ar){ar.push('<div class="f-productDetailContent J_productDetailContent">');ar.push("</div>");ar.push('<div class="optionMsg"></div>');ar.push('<div class="f-productBuyContent J_productBuyContent">');ar.push("</div>")}function T(){if(!U.data.nowData){return""}var aQ=[],aI=[],bh=U.data,a4=bh.nowData,bm=a4.propList||[],aR=typeof(a4.saleId)!="undefined"?a4.saleId:0,aF=typeof(a4.salePromotion)!="undefined"?a4.salePromotion:[],aY="g_stress mallPriceBig f-mallPriceWrap",aX="g_minor mallMarketPrice f-mallPriceWrap",aB="",bf="",ax=false,aA=false,a6=false,bb="",ar="",aO,aG,bn,a0,a3,aH,be,aJ,aK;E=((Q<100&&Q>1)||(a4.actualPrice!=a4.mallPrice));if(u){if("actualPrice" in a4){b=a4.actualPrice}if("discount" in a4){Q=a4.discount}else{Q=100}E=((Q<100&&Q>1)||(a4.actualPrice!=a4.mallPrice));x=a4.indepPrice?true:false}if(aF!=null||aF!=[]){ax=true;aA=S(bm);if(aA==true){a6=P(aF,false);if(a6){E=false;aI.push('<div class="fk-saleTime J_saleProTimeCount J_saleRemove">');aI.push("<table>");aI.push("<tr>");aI.push("<td>");aI.push('<div class="showSaleTimeImg fk-showSaleTimeImg">');aI.push("</div>");aI.push("</td>");aI.push('<td class="J_showSaleTimeClass fk-showSaleTimeStyle">');aI.push("</td>");aI.push("</tr>");aI.push("</table>");aI.push("</div>")}}}if(typeof(a4.salePromotion)!="undefined"){E=false}aO=a4.name;aJ=bm.length;for(be=0;be<aJ;be++){aK=bm[be];aG=aK.name;bn=aK.type;a0=aK.fileId;a3=aK.value||"";if(K.trim(a3).length<1){continue}if(bn==11&&E){aB=aX;bf=aY}else{if(bn==11&&!E){aB=aY}else{if(bn==12){aB=aX}else{aB=""}}}if(bn==11&&E){bb="";ar="J_mallPriceClass"}else{if(bn==11&&!E){bb="J_mallPriceClass"}else{bb=""}}aI.push('<div class="f-propContent '+bb+'">');aI.push('<div class="f-propName" title="'+aG+'" style="width:'+h+'px">'+aG+'<span class="f-colon">:</span></div>');aI.push('<div class="f-propValue '+aB+'">');if(bn==11){aI.push('	<span class="f-currencyVal">'+ap.choiceCurrencyVal+"</span>");if(E){aI.push('	<span class="mallPrice J_realMallAmount">'+(Y?a3:Fai.formatPriceEn(a3))+"</span>");aI.push("	</div>");aI.push("</div>");aI.push('<div class="f-propContent '+ar+'">');aI.push('<div class="f-propName" title="'+aG+'" style="width:'+h+'px">'+s+'<span class="f-colon">:</span></div>');aI.push('<div class="f-propValue '+bf+'">');aI.push('<span class="f-currencyVal">'+ap.choiceCurrencyVal+"</span>");var bj="";if(a3.indexOf("~")>=0){if(x){bj=b}else{var av=a3.split("~");var bi=parseFloat(av[0])*Q*0.01,az=parseFloat(av[1])*Q*0.01;bj=bi.toFixed(2)+"~"+az.toFixed(2)}}else{bj=b;bj=parseFloat(bj).toFixed(2)}aI.push('<span class="f-mallPrice mallPrice" id="realMallAmount">'+(Y?bj:Fai.formatPriceEn(bj))+"</span>");aI.push('<span class="fk-mallBuy-big memberPrice">'+(Y?j:Fai.formatPriceEn(j))+"</span>")}else{aI.push('	<span class="mallPrice J_realMallAmount" id="realMallAmount">'+(Y?a3:Fai.formatPriceEn(a3))+"</span>")}}else{if(bn==12){aI.push('<span class="f-currencyVal">'+ap.choiceCurrencyVal+"</span>");aI.push('<span class="mallPrice">'+(Y?a3:Fai.formatPriceEn(a3))+"</span>")}else{if(bn==13){aI.push('<span id="mallAmount">'+a3+"</span>")}else{if(bn==16){aI.push('<span id="mallWeight">'+a3+"</span>"+ap.weightType)}else{aI.push(a3)}}}}aI.push("</div>");aI.push("</div>")}if(ap.mallOpen){if(ap.mallShoppingOptions){if("showOptionList" in a4){var aN=a4.showOptionList||[],ba=a4.oldOptionsStr,aJ=aN.length,aE=a4.optionsAmountList||[];if(E){K.each(aE,function(bo,bp){if(x){bp.oPrice=b}else{bp.oPrice=bp.oPrice*Q*0.01}})}for(var be=0;be<aJ;be++){var au=aN[be],a2=au.items,bk=au.fieldKey,aU=0;if(ba){var aS=ba.split("_");for(var bd=0;bd<aS.length;bd++){if(bk==aS[bd]){aU=bd}}}var at=a2.length;if(at>0){aI.push('<div class="f-propContent f-optionContent">');aI.push('<div class="f-propName" title="" style="width:'+h+'px">'+Fai.encodeHtml(au.name)+'<span class="f-colon">:</span></div>');aI.push('<div class="propName" style="display:none;">'+Fai.encodeHtml(au.name)+"</div>");aI.push('<div class="f-optionValue" style="width:'+(318-h)+'px">');aI.push('<ul class="optionItemWrap" data="'+au.fieldKey+'" type="'+au.type+'">');for(var bd=0;bd<at;bd++){var aL=a2[bd];var aD=aL.i,a1=aL.v,bl=aL.path,aW=false;if(aE){for(var bc=0;bc<aE.length;bc++){var aZ=aE[bc];var aT=aZ.t2;var a8;if("flag" in aZ){a8=aZ.flag}else{a8=1}var a9=aT.split("_");if(a8==1&&aU<a9.length&&a9[aU]==aD){aW=true;break}}}if(aW){aI.push('<li class="optionItem">');if(bl){aI.push('<span class="img-n">'+Fai.encodeHtml(a1)+"</span>");var a5=aL.orgPic;if(a5){aI.push('<img class="i-img J-item J-item-img" src="'+bl+'" data="'+aD+'" _fk-org="'+a5+'" faiWidth="'+aL.faiWidth+'" faiHeight="'+aL.faiHeight+'"/>')}else{aI.push('<img class="i-img J-item J-item-img" src="'+bl+'" data="'+aD+'"/>')}}else{aI.push('<a class="J-item oItem" href="javascript:;" hidefocus="true" data="'+Fai.encodeHtmlAttr(aD)+'">');aI.push("<span>"+Fai.encodeHtml(a1)+"</span>");aI.push("</a>")}aI.push('</li">')}}aI.push("</ul>");aI.push("</div>");aI.push("</div>")}}}}if(!al.hiddenBuybtn){var ay=1;var aV="";var a7="";if(a4.limitAmount_mall){var aw=0;var aC=a4.productRestrictInfo;if(aC){if(aC.count){aw=aC.count}}var aM=0,aP=a4.minAmount,bg=a4.maxAmount;aM=bg-aw;if(Fai.fkEval(aM)<0){aM=-1}if(aP>1&&bg!=0){a7="( "+LS.minAmount+" : "+aP+" ; "+LS.maxAmount+" : "+aM+" )";aV=' _min="'+aP+'" _max="'+aM+'" '}else{if(aP==1&&bg!=0){a7="("+LS.maxAmount+" : "+aM+" )";aV='" _max="'+aM+'" '}else{if(aP>1&&bg==0){a7="( "+LS.minAmount+" : "+aP+")";aV=' _min="'+aP+'" '}}}ay=aP}aI.push('<div class="f-propContent f-countContent">');aI.push('<div class="f-propName" title="" style="width:'+h+'px">'+LS.amountNum+'<span class="f-colon">:</span></div>');aI.push('<div class="f-propValue f-countValue" style="width:'+(318-h)+'px">');aI.push('<input id="cartbuyCountPdSlide" type="text" class="f-cartCountInput" onkeypress="javascript:return Fai.isNumberKey(event);" onchange="Site.mallBuyCountChange(\'PdSlide\')" value="'+ay+'" '+aV+"/>");aI.push('<div class="f-buyCountBtn">');aI.push('<span id="buyCountDesPdSlide" class="f-countBtn mallJia disableMallJian" onclick="Site.desMallBuyCount(\'PdSlide\')"></span>');aI.push('<span id="buyCountIncPdSlide" class="f-countBtn mallJian" onclick="Site.incMallBuyCount(\'PdSlide\')"></span>');aI.push("</div>");aI.push('<span id="limitAmountDiv" class="f-limitAmountDiv" title="'+a7+'">');aI.push(a7);aI.push("</span>");aI.push("</div>");aI.push("</div>")}}aQ.push('<div class="f-productNameContent">');aQ.push('	<p class="f-productName">');if(al.titleClick){aH=U.data.nowData.productUrl;aQ.push('<a class="f-productTitle" href="'+aH+'" target="_blank">');aQ.push(aO);aQ.push("</a>")}else{aQ.push(aO)}aQ.push("	</p>");aQ.push("</div>");aQ.push('<div class="f-underlineContent">');aQ.push('<div class="f-underline"></div>');aQ.push("</div>");aQ.push('<div class="f-propListContent">');aQ.push(aI.join(""));aQ.push("</div>");return aQ.join("")}function S(at){var ar=false,au;if(at==null){return ar}len=at.length;for(i=0;i<len;i++){au=at[i];type=au.type;value=au.value||"";if(K.trim(value).length<1){continue}if(type==11){ar=true;break}}return ar}function ae(){if(!ap.mallOpen&&!ap.bookingOpen){return}if(al.hiddenBuybtn){return}var av=[],at=U.dom,az=ap.addCartText||"",aA=ap.buyNowText||"",aw=ap.addCartClickEvent||"",au=ap.buyNowClickEvent||"",ax=ap.bookingClicEvent||"";if(ap.mallOpen){av.push('<div class="f-buyContent">');av.push('	<a href="javascript:;" onclick="'+aw+'" hidefocus="true" class="fk-mall-addCart f-addCart"><span>'+az+"</span></a>");av.push('	<a href="javascript:;" onclick="'+au+'" hidefocus="true" class="fk-mallBuy-big f-buyNow"><span class="bug-img">&nbsp;</span><span>'+aA+"</span></a>");av.push("</div>")}else{if(ap.bookingOpen){var ar=ap.bookingInfo;var ay="onclick=\"jzUtils.run({'name':'bookingSubmitPanel.init', 'prompt':'true'}, '{&quot;panelHeight&quot;:"+ar.panelHeight+", &quot;panelWidth&quot;:"+ar.panelWidth+", &quot;pid&quot;:"+Site.productSlide.data.id+"}');\"";av.push('<div class="f-buyContent">');av.push('	<a href="javascript:;" '+ay+' hidefocus="true" class="fk-mallBuy-big f-buyNow"><span class="bug-img fk-bookingIcon">&nbsp;</span><span>'+ar.bookingNameStr+"</span></a>");av.push("</div>")}}return av.join("")}function C(ar){ar.push('<div class="f-albumsWrap J_albumsWrap">');ar.push("</div>");ar.push('<a href="javascript:;" onclick="return false;" class="f-albumsLeft J_albumsLeft" hidefocus="true">向左</a>');ar.push('<a href="javascript:;" onclick="return false;" class="f-albumsRight J_albumsRight" hidefocus="true">向右</a>')}function G(){var aw=U.dom,ay=U.data;aw.productDetailContent.empty();aw.productDetailContent.append(T());aw.productBuyContent.empty();aw.productBuyContent.append(ae());var ar=U.data.nowData;if(ar){var aB=ar.optionsAmountList,av=ar.relateAmount,aC=ar.mallPrice,aA=ar.productRestrictInfo,at=ar.limitAmount_options,aE=ar.oldOptionsStr,au=ar.newOptionsStr,aD=ar.limitAmount_mall,az=ar.minAmount,ax=ar.maxAmount;Site.initProductRestrict("PdSlide",aD,az,ax,aA);if(ap.mallShoppingOptions&&typeof(aB)!="undefined"){if(!aE){aE="null"}var aF=ar.salePromotion;if(typeof(aF)!="undefined"){Site.salePromotionDetail.salePromotionParam=aF}Site.initProductOptions("PdSlide",aB,av,aC,at,aA);Site.initOptionsStr(aE)}}if(Fai.top._manageMode){q()}}function aq(){var at=U.dom,ar=U.data;nowData=ar.nowData,multiContentRight=at.multiContentRight,propList=nowData.propList||[],saleId=typeof(nowData.saleId)!="undefined"?nowData.saleId:0,salePromotion=typeof(nowData.salePromotion)!="undefined"?nowData.salePromotion:[],showSaleCountDownFlag=false,beginTime="",endTime="";ap.saleShowType=1;if(salePromotion!=null&&salePromotion!=[]){showSaleMsg=true;findPriceFlag=S(propList);if(findPriceFlag==true){showSaleCountDownFlag=P(salePromotion,true);if(!showSaleCountDownFlag){multiContentRight.find(".J_saleProTimeCount").remove();beginTime=salePromotion.beginTime;endTime=salePromotion.endTime;if(beginTime==null||beginTime==""||endTime==null||endTime==""){X(salePromotion)}}}}}function D(aH,aM,at,aw){var ax=[],aL=U.dom,aF=aL.multiContentRight,aE="",aN=LS.salePromotionBegin,aD=LS.salePromotionEnd,az=0,aB="g_stress mallPriceBig",aJ="g_minor mallMarketPrice",au,aK,av,ay,aA,aG,aC,ar,aI;if(at==1){aE=aN;az=aH}else{aE=aD;az=aM}if(at=="2"){X(aw)}clearInterval(ap.saleCountTimeInterval);ap.saleCountTimeInterval=setInterval(function(){au=parseInt(az/(3600*24));aK=parseInt(az/3600)-(au*24);av=parseInt(az/60)-(au*24*60)-(aK*60);ay=parseInt(az%60);az--;aA=Fai.format(aE,au,aK,av,ay);aF.find(".J_showSaleTimeClass").html("&nbsp;&nbsp;"+aA);if(az<0){if(at==1){az=aM;aE=aD;at=2;X(aw)}else{clearInterval(ap.saleCountTimeInterval);aF.find(".J_saleRemove").remove();if(aw.other.ruleData.s=="1"){aF.find(".J_newMallPriceClass").find(".f-propValue").addClass(aB);aF.find(".J_newMallPriceClass").find(".f-propValue").removeClass(aJ);aF.find(".J_newMallPriceClass").find(".mallPrice").addClass("f-mallPrice")}}}},1000)}function P(ay,aw){var at=false,ar=ay.beginTime,au=ay.endTime,ax=new Date().getTime()+ap.timeDiff,av,az;if(typeof(ar)=="undefined"||ar==null||ar==""||typeof(au)=="undefined"||au==null||au==""){return at}av=new Date(ar.replace(/-/g,"/")).getTime();az=new Date(au.replace(/-/g,"/")).getTime();if(av>ax||az>ax){at=true}if(aw){if(av>ax){D(parseInt((av-ax)/1000),parseInt((az-av)/1000),1,ay)}else{if(az>ax){D(parseInt((av-ax)/1000),parseInt((az-ax)/1000),2,ay)}}}return at}function X(az){if(ap.saleShowType!="1"){return}ap.saleShowType=2;var aA=[],at=[],aK=U.dom,aI=aK.multiContentRight,aL="g_stress mallPriceBig f-mallPriceWrap",aw="g_minor mallMarketPrice f-mallPriceWrap",aD,aE,aB,ax,ar,aF,aM=[],av,aH="";if(typeof(az)=="undefined"||az==null||az==""){return}var aG=aI.find(".J_mallPriceClass").find(".f-mallPrice").css("color");if(typeof(aG)=="undefined"||aG==null||aG==""){aG="#cf0000"}if(az.saleType=="1"){ax="";ar=parseFloat(az.other.ruleData.d[0].m);aF=K(".J_mallPriceClass").find(".f-propName").attr("title");var aC=K(".J_mallPriceClass").find(".mallPrice").html();if(aC.indexOf("~")>0){var ay=aC.split("~");var au=parseFloat(ay[0]);if(isNaN(au)){au=0}aM.push(au);au=parseFloat(ay[1]);if(isNaN(au)){au=0}aM.push(au)}else{var au=parseFloat(aC);if(isNaN(au)){au=0}aM.push(au)}for(var aJ=0;aJ<aM.length;aJ++){av=0;if(az.other.ruleData.s=="1"){if(Fai.top._lcid==2052||Fai.top._lcid==1028){ax=Fai.format(LS.salePromotionDisCount,ar)}else{ax=Fai.format(LS.salePromotionDisCount,Fai.formatPriceEn(10*(10-ar),null,true))}av=aM[aJ]*(ar/10)}else{if(Fai.top._lcid==2052||Fai.top._lcid==1028){ax=Fai.format(LS.salePromotionLapse,ar)}else{ax=Fai.format(LS.salePromotionLapse,Fai.formatPriceEn(ar,null,true))}av=aM[aJ]-ar}if(isNaN(av)||av<0){av=0}if(aJ>0){aH+="~"}aH+=av.toFixed(2)+""}K(".J_mallPriceClass").find(".f-propValue").addClass("fk-saleRelative");at.push('<div class="f-propContent J_newMallPriceClass">');at.push('<div class="f-propName" title="'+aF+'" style="width:'+h+'px">'+aF+'<span class="f-colon">:</span></div>');at.push('<div class="f-propValue '+aw+'">');at.push('<span class="f-currencyVal">'+ap.choiceCurrencyVal+"</span>");at.push('<span class="mallPrice">'+aC+"</span>");at.push("</div>");at.push("</div>");K(".J_mallPriceClass").before(at.join(""));K(".J_mallPriceClass").find(".f-propName").html(LS.promotionPrice+"<span class='f-colon'>:</span>");K(".J_mallPriceClass").find(".mallPrice").html(aH);K(".J_mallPriceClass").find(".f-propName").attr("title",LS.promotionPrice);K(".J_mallPriceClass").addClass("J_saleRemove");aA.push('<span class="fk-saleTopSet fk-saleAbsolute"><table border="0" cellspacing="0" cellpadding="0"><tr>');aA.push('<td class="fk-saleTdSty1">');aA.push('<div  class="f-trangle " style="border-bottom: 5px solid '+aG+';">');aA.push("</div>");aA.push("</td>");aA.push('<td class="fk-saleTdSty2">');aA.push('<div class="f-rect" style="background-color:'+aG+';"  title="'+az.name+'">');aA.push(ax);aA.push("</div>");aA.push("</td>");aA.push("</tr></table></span>");K(".J_mallPriceClass").find(".f-propValue").append(aA.join(""))}else{aD=az.other.ruleData.d.length;aE=aD*20+(aD-1)*12+"px";aA.push('<div class="f-propContent J_saleRemove">');aA.push('<div class="f-propName" title="'+LS.salePromotionName+'" style="height:'+aE+";width:"+h+'px">'+LS.salePromotionName+'<span class="f-colon">:</span></div>');aA.push('<div class="f-propValue fk-saleRelative" style="height:'+aE+'">');aA.push('<span class="saleHoverDefault fk-saleAbsolute" title="'+az.name+'">');for(var aJ=0;aJ<aD;aJ++){if(aJ!=0){aB="top:"+(aJ*30)+"px"}else{aB="top:0"}aA.push('<span class="fk-saleAbsolute" style="'+aB+'">');aA.push('<span class="saleFullReBg" style="margin:0;background-color:'+aG+';">');aA.push(Fai.format(LS.salePromotionOnlyFullReduce));aA.push("</span>");aA.push('<span style="margin:0;color:'+aG+'">');if(Y){aA.push("&nbsp;&nbsp;&nbsp;"+Fai.format(LS.salePromotionFullReduce,az.other.ruleData.d[aJ].m,az.other.ruleData.d[aJ].n))}else{aA.push("&nbsp;&nbsp;&nbsp;"+Fai.format(LS.salePromotionFullReduce,Fai.formatPriceEn(az.other.ruleData.d[aJ].m,null,true),Fai.formatPriceEn(az.other.ruleData.d[aJ].n,null,true)))}aA.push("</span>");aA.push("</span>")}aA.push("</span>");aA.push("	</div>");aA.push("</div>");aI.find(".J_mallPriceClass").after(aA.join(""))}Site.showSalePromotionDl();if(Fai.top._manageMode){q()}}function v(au){var av=U.data,at={src:"",width:-1,height:-1},ar={};K.extend(ar,at,au);N(ar)}function ag(){var av=U.data,au=av.nowData,aw,at,ar;if(au){aw=au.picPath;at=au.picwidth;ar=au.picHeight;v({src:aw,width:at,height:ar})}}function N(ax){var av=U.dom,at=av.productImg,ar=ax.src||"",az=390,aA=390,aw=new Image(),ay=at.find(".J_nowImg"),au,aB;if(K.trim(ar).length<1){Fai.ing("找不到该图片",true)}if(ay.length>0){if(ay.attr("src")==K.trim(ar)){return}}at.empty().append('<div class="f-productImgLoading"></div>');if(V&&V.onload){V.onload=function(){}}aw.onload=function(){var aH=false,aG=false,aD="",aF=[],aE=[],aC,aI;au=aw.width;aC=au;aB=aw.height;aI=aB;if(au>=aB&&au>az){aH=true;aC=az}else{if(aB>aA){aG=true;aI=aA}}if(aH){aD+="width:"+aC+"px;"}if(aG){aD+="height:"+aI+"px;"}if(aH&&!aG){aI=az*aw.height/aw.width}if(!aH&&aG){aC=aA*aw.width/aw.height}if(!al.picZoom&&!al.picPopupPD){aE.push('	<a class="f-imgClick" href="'+(U.data.nowData.productUrl)+'" target="_blank" title="点击进入产品详情页面">');aE.push('		<img class="J_nowImg " src="'+ar+'" style="'+aD+'" />');aE.push("	</a>")}else{aE.push('	<img class="J_nowImg " src="'+ar+'" style="'+aD+'" />')}aF.push('<table cellpadding="0" cellspacing="0" class="f-imgContainer">');aF.push("	<tr>");aF.push("		<td>");aF.push(aE.join(""));aF.push("		</td>");aF.push("	</tr>");aF.push("</table>");if(al.picZoom){aE=[];aE.push(aF.join(""));aF=[];aF.push('<div class="cloud-zoom f-imgWrap" href="'+ar+'">');aF.push(aE.join(""));aF.push("</div>")}at.empty();at.append(aF.join(""));if(al.picZoom){ay=at.find(".cloud-zoom");ay.attr("rel","adjustX:-4, adjustY:-4, maxWidth:"+az+", maxHeight:"+aA+',position:"inside"');ay.CloudZoom({imageHeight:aB,imageWidth:au});if(!al.picPopupPD){setTimeout(function(){at.find(".mousetrap").append('<a href="'+(U.data.nowData.productUrl)+'" target="_blank" hidefocus="true" class="f-popupImgA" title="点击查看产品详情"></a>')},30)}}};V=aw;setTimeout(function(){aw.src=ar},50)}function c(au){var az=[],aA=[],aD=68,aB=0,ay=U.data,au=ay.id,aF=false,aG="",aE="",at=0,aw=0,ar,av,ax,aC;aC=y.length;for(ax=0;ax<aC;ax++){if(y[ax].id==au){ar=y[ax];aF=true;break}}if(!aF){return""}av=ar.picPathList||[];aC=av.length;for(ax=0;ax<aC;ax++){aG=av[ax].thumbPath;aE=av[ax].path;at=av[ax].picWidth;aw=av[ax].picHeight;aA.push("<li>");aA.push('	<a href="javascript:;" class="J_pic" onclick="return false;" path="'+aE+'" picwidth="'+at+'" picheight="'+aw+'" >');aA.push('		<img src="'+aG+'" style="display: block; width:60px; height:60px;" />');aA.push("	</a>");aA.push("</li>");aB+=aD}az.push('			<div class="f-imgListOuter J_imgListOuter">');az.push('				<ul class="f-imgList J_imgList" style="width:'+aB+'px;" _num="0">');az.push(aA.join(""));az.push("				</ul>");az.push("			</div>");return az.join("")}function a(){var au=U.dom,at=U.data,ar=au.groupBtn;ar.left.removeClass("f-BtnDisabled f-BtnEnabled");ar.right.removeClass("f-BtnDisabled f-BtnEnabled");au.imgListWrap.empty();au.imgListWrap.append(c(at.id));au.imgListOuter=au.imgListWrap.find(".J_imgListOuter");au.imgList=au.imgListWrap.find(".J_imgList");au.imgList.find(".J_pic").hover(function(){v({src:K(this).attr("path"),width:K(this).attr("picwidth"),height:K(this).attr("picheight")})})}function w(){var aw=[],ax=[],ar=90,aA=0,au,az,at;if(y&&y.length>0){for(var av=0,ay=y.length;av<ay;av++){au=y[av];az=au.picThumbPath||"";at=au.id;ax.push("<li>");ax.push('	<div class="f-albumsImgWrap J_albumsImgWrap J_albumsImgWrap'+at+'">');ax.push('		<a href="javascript:;" onclick="return false;" class="f-albumsImg J_albumsImg J_albumsImg'+at+'" _id="'+at+'">');ax.push('			<img src="'+az+'" style="display: block; width:80px; height:80px;" />');ax.push("		</a>");ax.push('		<div class="f-albumsImgTip"></div>');ax.push("	</div>");ax.push("</li>");aA+=ar}aw.push('<div class="f-albumsOuter J_albumsOuter">');aw.push('	<ul class="f-albums J_albums" style="width:'+aA+'px;" _num="0">');aw.push(ax.join(""));aw.push("	</ul>");aw.push("</div>")}return aw.join("")}function n(){var at=U.dom,ar;at.albumsWrap.empty();at.albumsWrap.append(w());at.albumsOuter=at.albumsWrap.find(".J_albumsOuter");at.albums=at.albumsWrap.find(".J_albums");at.albumsImgWrap=at.albums.find(".J_albumsImgWrap");ar=at.albums.children().first().outerWidth()||90,at.albums.find(".J_albumsImg").click(function(){var av=K(this).attr("_id"),au=d(av);f(av)});B({index:L,visibleNum:2});an()}function p(){var at=U.dom,ar=U.data;at.albumsImgWrap.removeClass("f-albumsImgWrap-selected");at.albumsImgWrap.filter(".J_albumsImgWrap"+ar.id).addClass("f-albumsImgWrap-selected")}function R(at){var ar=U.dom,aw=ar.albums,aA=ar.albumsOuter,au=ar.albumsBtn,av=0,ax={content:aw,contentOuter:aA,button:au,scrollRow:true,visibleNum:2},az={},ay=at.changeProduct||false;K.extend(az,ax,at);if(az.scrollRow){A(az)}else{av=ao(az);B({index:av,visibleNum:2});z(av)}ab(az);K("#fk-productSlidePanel").find(".optionMsg").hide()}function ai(aw){var ay=U.dom,ax=ay.imgList,ar=ay.imgListOuter,av=ay.groupBtn,au={content:ax,contentOuter:ar,button:av,scrollRow:true},at={};K.extend(at,au,aw);A(at);ab(at)}function A(aw){var aA=aw.content,at=aA.children(),ay=at.length,az=at.first().outerWidth(),ax=aw.contentOuter.width(),aE=parseInt(ax/az),aD=aw.visibleNum||0,aC=aE-aD,au=parseInt((ay-aD)/aC),ar=parseInt(aA.attr("_num"))||0,av=0,aB=aw.direction;if(ay<=aE){au=0}else{if((au*aC-ay)>=0){au-=1}}if(aB){av=ar+1;if(av>au){av=0;aA.stop(true).animate({left:"0"});aA.attr("_num",av)}else{aA.stop(true).animate({left:-(av*aC*az)+"px"});aA.attr("_num",av)}}else{av=ar-1;if(av<0){av=au}aA.stop(true).animate({left:-(av*aC*az)+"px"});aA.attr("_num",av)}}function B(ax){var au=U.dom,aC=au.albums,at=aC.children(),aA=at.length,aB=at.first().outerWidth(),ay=au.albumsOuter.width(),aG=parseInt(ay/aB),aF=ax.visibleNum||0,aE=aG-aF,av=0,ar=parseInt(aC.attr("_num"))||0,aw=0,aD=0,az=ax.index;if(aF>parseInt(aG/2)){aF=parseInt(aG/2);aE=aG-aF}if(aA>aG&&az>=aE){av=parseInt((aA-aF)/aE);if((av*aE-aA)>=0){av-=1}aw=parseInt((az-aF)/aE);aD=parseInt(az/aE)}else{av=0;aw=0;aD=0}if(aw>av){aw=0}else{if(aw<0){aw=av}}if(ar==aw||ar==aD){return}aC.stop(true).animate({left:-(aw*aE*aB)+"px"});aC.attr("_num",aw)}function ao(ay){var aC=ay.content,au=aC.children(),aA=au.length,aB=au.first().outerWidth(),az=ay.contentOuter.width(),at=0,ar=L,aD=ay.direction,aF=0,aE=1,aw=ay.cycle||false,av,ax;av=aA-(aA%aE);if(aD){ax=ar+aE;if(ax<av){aF=ax}else{if(ar>av){aF=0}else{if(av==aA){aF=av-1;if(aw){aF=0}return aF}if(av==ar){aF=av;return aF}aF=av}}}else{ax=ar-aE;if(ax>at){aF=ax}else{if(ar<at){aF=0}else{aF=at;if(at==ar){if(aw){aF=aA-1}return aF}}}}return aF}function ab(aw){var aB=aw.content,at=aB.children(),az=at.length,aA=at.first().outerWidth(),ax=aw.contentOuter.width(),ay=aw.button,aE=parseInt(ax/aA),aD=aw.visibleNum||0,aC=aE-aD,au=parseInt((az-aD)/aC),ar=parseInt(aB.attr("_num"))||0,av=0;if(az<=aE){au=0}else{if((au*aC-az)>=0){au-=1}}av=ar+1;if(av>au){av=0;ay.right.addClass("f-BtnDisabled").removeClass("f-BtnEnabled")}else{ay.right.addClass("f-BtnEnabled").removeClass("f-BtnDisabled")}av=ar-1;if(av<0){ay.left.addClass("f-BtnDisabled").removeClass("f-BtnEnabled")}else{ay.left.addClass("f-BtnEnabled").removeClass("f-BtnDisabled")}}function an(){var ay=U.dom,ax=ay.albums,ar=ay.albumsOuter,aw=ay.albumsBtn,av=0,au={content:ax,contentOuter:ar,button:aw,scrollRow:true},at={};K.extend(at,au,{scrollRow:true});ab(at)}function ah(){var ax=U.dom,aw=ax.imgList,ar=ax.imgListOuter,av=ax.groupBtn,au={content:aw,contentOuter:ar,button:av,scrollRow:true},at={};K.extend(at,au,{scrollRow:true});ab(at)}function ak(au){var av=[],at,ar;av.push(au.qsUrl);av.push("&cmd=list");K.ajax({type:"get",cache:false,url:Site.genAjaxUrl("productSlide_h.jsp")+av.join(""),error:function(){Fai.ing("服务繁忙，请稍候重试",false)},success:function(ay){var aw=K.parseJSON(ay),ax=U.data;if(aw.success){y=aw.list;al=aw.setInfo;ap=aw.data;ac=ap.css;Q=ap.levelDiscount;s=ap.memberPrice;u=ap.proIndepDisc;j=ap.memberPriceLabel;h=al.prop2;if(Fai.top._manageMode){H=aw.itemList}if(y.length<1){Fai.ing("没有产品信息");return}at=new Date().getTime();ar=ap.svrTimeLong;ap.timeDiff=ar-at;ap.saleShowType=1;ap.saleCountTimeInterval="";if(ap.productId==-1){ax.id=y[0].id}else{ax.id=ap.productId}L=d(ax.id);if(L==-1){Fai.ing("没有该产品信息");return}else{ax.nowData=y[L]}r()}else{Fai.ing("获取数据失败",false)}}})}function m(){if(!al.shareShow){return}U.dom.shareContent.addClass("f-shareContentIniting");clearTimeout(l);l=setTimeout(function(){var ar=[];ar.push("cmd=share");ar.push("&id="+U.data.id);ar.push("&browserTitle="+Fai.top.document.title);K.ajax({type:"post",url:Site.genAjaxUrl("productSlide_h.jsp"),data:ar.join(""),error:function(){Fai.ing("服务繁忙，请稍后重试",false)},success:function(av){var au=K.parseJSON(av),aw=U.dom,at="";if(au.success){at=au.content||""}else{Fai.ing("获取数据失败",false)}aw.shareContent.removeClass("f-shareContentIniting");aw.shareContent.empty().append(at)}})},300)}function d(av){var at=-1,au,ar;if(y&&y.length>0){ar=y.length;for(au=0;au<ar;au++){if(y[au].id==av){at=au;break}}}return at}function z(ar){if(L==ar){return}if(y&&y[ar]){f(y[ar].id)}}function f(au){var ar=-1,at=U.data;ar=d(au);if(ar==-1){Fai.ing("没有该产品信息");return}else{if(ar==L){return}}L=ar;at.id=parseInt(au);at.nowData=y[L];e()}function e(){U.dom.imgList=null;ag();G();aq();a();m();p();setTimeout(function(){aj()},50)}function O(at){var ar=new Image();ar.src=at}function aj(){var aw=U.data,av=aw.nowData,au=av.picPathList||[],at,ar;ar=au.length;for(at=0;at<ar;at++){O(au[at].path)}}function am(){var ar=U.dom;ar.productDetailContent.empty();ar.productBuyContent.empty();ar.productImg.empty();ar.imgListWrap.empty();ar.albumsWrap.empty();ar.shareContent.empty()}function W(){y=null;L=-1;V=null;l=null;ap=null;al=null;Q=null;b=null;x=null;u=null;s=null;j=null;E=false;U.data={};h=82}function k(){var av=U.dom,ar=av.panel,ax=av.panelBtn,au=av.groupBtn,at=av.albumsBtn,aw;ax.close.click(function(){aa()});ax.left.click(function(){R({scrollRow:false,direction:false,cycle:true,changeProduct:true})});ax.right.click(function(){R({scrollRow:false,direction:true,cycle:true,changeProduct:true})});at.left.click(function(){R({scrollRow:true,direction:false})});at.right.click(function(){R({scrollRow:true,direction:true})});au.left.click(function(){ai({scrollRow:true,direction:false})});au.right.click(function(){ai({scrollRow:true,direction:true})});av.contentBg.click(function(){aa()});av.productPicContent.hover(function(){if(!av.imgList){return}var ay=av.imgList.children();if(ay&&ay.length<2){return}aw=setTimeout(function(){av.productImgGroup.slideDown("normal",function(){ah()})},250)},function(){clearTimeout(aw);av.productImgGroup.slideUp()});av.content.mouseleave(function(){clearTimeout(aw);av.productImgGroup.slideUp()})}function M(ar){var at=U.dom;at.panel=Fai.top.$("#fk-productSlidePanel");at.content=at.panel.find(".J_content");at.contentBg=at.panel.find(".J_contentBg");at.panelBtn={};at.panelBtn.left=at.panel.find(".J_turnLeft");at.panelBtn.right=at.panel.find(".J_turnRight");at.panelBtn.close=at.panel.find(".J_close");at.multiContent=at.panel.find(".J_multiContent");at.albumsContent=at.panel.find(".J_albumsContent");at.multiContentLeft=at.multiContent.find(".J_multiContentLeft");at.multiContentRight=at.multiContent.find(".J_multiContentRight");at.productDetailContent=at.multiContentRight.find(".J_productDetailContent");at.productBuyContent=at.multiContentRight.find(".J_productBuyContent");at.shareContent=at.multiContentLeft.find(".J_shareContent");at.productPicContent=at.multiContentLeft.find(".J_productPicContent");at.productImg=at.multiContentLeft.find(".J_productImg");at.productImgGroup=at.multiContentLeft.find(".J_productImgGroup");at.imgListWrap=at.multiContentLeft.find(".J_imgListWrap");at.groupBtn={};at.groupBtn.left=at.multiContentLeft.find(".J_groupLeft");at.groupBtn.right=at.multiContentLeft.find(".J_groupRight");at.albumsWrap=at.albumsContent.find(".J_albumsWrap");at.albumsBtn={};at.albumsBtn.left=at.albumsContent.find(".J_albumsLeft");at.albumsBtn.right=at.albumsContent.find(".J_albumsRight");if(typeof ar.func=="function"){setTimeout(function(){ar.func.apply(U,arguments)},30)}}function r(){af({func:function(){var at=U.dom;if(at.panel&&at.panel.length>0){if(at.panel.is(":hidden")){at.panel.show()}}else{Fai.top.$("#fk-productSlidePanel").show()}ag();G();aq();a();n();m();p();setTimeout(function(){aj()},50)}});if(Fai.top._manageMode&&H&&H.length>0){var ar=U.dom.content;ar.off("mousemove.productSlide").on("mousemove.productSlide",function(){Site.addEditLayer("fk-productSlideContent",H,100,{extCls:"fk-productSlideEditLayer"})});ar.off("mouseleave.productSlide").on("mouseleave.productSlide",function(){Site.removeEditLayer("fk-productSlideContent")})}}function aa(){var ar=U.dom;if(Fai.top._manageMode&&H){Site.removeEditLayer("fk-productSlideContent")}ar.panel&&ar.panel.hide();W();U.dom={};g="";ac="";H=null;Fai.top.$("#fk-productSlidePanel").remove()}U.init=function(ar){aa();Fai.top.$("body").append(F().join(""));g=ar;ak({qsUrl:ar});M({func:k})};U.refresh=function(){am();W();ak({qsUrl:g})};function af(ar){if(!Site.checkCssLoad(ac)&&K.trim(ac).length>0){Site.demandLoadCss(ac,function(){if(typeof ar.func=="function"){ar.func.apply(U,arguments)}})}else{if(typeof ar.func=="function"){ar.func.apply(U,arguments)}}}function q(){K(".f-propName").attr("class","f-propName paramResize");t();K(".f-propName,.u-paramResize-e,.u-paramResize-w").hover(function(){K(".f-propName").css({"border-left":"1px dashed #2b73ba","border-right":"1px dashed #2b73ba","border-top":"1px solid #2b73ba","border-bottom":"1px solid #2b73ba"})},function(){K(".f-propName").css("border","1px dashed transparent")})}function t(){var ar=K(".f-propListContent ").find(".f-propContent").find(".paramResize");if(ar.length<1){return}ar.each(function(){var az=K(this),at=Fai.isIE8()?K(document):K(window),aB,ay,av=K(this),ax,aw={},aD;if(az.hasClass("paramResize")){az.before("<div class='u-paramResize-w' style='float:left' title='可拖动调节宽度'><div style='width:5px;height:"+K(az).outerHeight()+"px;z-index:999'></div></div>");az.after("<div class='u-paramResize-e' style='float:left' title='可拖动调节宽度'><div style='width:5px;height:"+K(az).outerHeight()+"px;z-index:999'></div></div>");K(".u-paramResize-e,.u-paramResize-w").css("cursor","e-resize")}aB=K(az).prev();ay=K(az).next();if(!ay.hasClass("u-paramResize-e")||!aB.hasClass("u-paramResize-w")){return}aB.off("mousedown.fi").on("mousedown.fi",aC);ay.off("mousedown.fi").on("mousedown.fi",aC);function aC(aE){aE=aE||window.event;aw.x=aE.pageX;if(K(this).hasClass("u-paramResize-w")){aw.dir="w";aw.ptb=parseInt(av.css("width"))}else{if(K(this).hasClass("u-paramResize-e")){aw.dir="e";aw.ptb=parseInt(av.css("width"))}}ax=K("#dockTip").show().css({left:"-1000px;",top:"-1000px"});at.off("mousemove.fi").on("mousemove.fi",au);at.off("mouseup.fi").on("mouseup.fi",aA);aE.preventDefault()}function au(aH){K("body").css("cursor","e-resize");K(".f-propName").css({"border-left":"1px dashed #2b73ba","border-right":"1px dashed #2b73ba","border-top":"1px solid #2b73ba","border-bottom":"1px solid #2b73ba"});aH=aH||window.event;var aI={x:aH.pageX},aF,aK,aE=1,aG=200,aJ="";if(aw.dir=="w"){aF=aw.x-aI.x;aK=aw.ptb+aF;aK=aK>aE?aK:aE;aK=aK>aG?aG:aK;aK=Math.round(aK);aJ="宽度:"}else{if(aw.dir=="e"){aF=aI.x-aw.x;aK=aw.ptb+aF;aK=aK>aE?aK:aE;aK=aK>aG?aG:aK;aK=Math.round(aK);aJ="宽度:"}}aD=aK;K(".f-propName").css({width:aK+"px"});K(".f-optionValue").css({width:(318-aK)+"px"});K(".f-countValue").css({width:(318-aK)+"px"});ax.html(aJ+aK).css({left:aH.pageX-28,top:aH.pageY-40});aH.preventDefault()}function aA(aF){K("body").css("cursor","");K(".f-propName").css("border","1px dashed transparent");aF=aF||window.event;aw.dir="";at.off("mousemove.fi");at.off("mouseup.fi");ax.hide();aw={};var aE=al.id;var aH="cmd=set&id="+aE+"&style=19&prop0=1&prop2="+aD;var aG=Site.genAjaxUrl("module_h.jsp");Fai.ing("正在保存……",false);K.ajax({type:"post",url:aG,data:aH,error:function(){Fai.ing("服务繁忙，请稍候重试",false)},success:function(aJ){var aI=K.parseJSON(aJ);if(aI.success){Fai.ing("修改宽度成功",true);h=aD}else{Fai.ing(aI.msg,false);K(".J_productDetailContent").find(".f-propContent").find(".paramResize").css("width",h)}}});aF.preventDefault()}})}})(jQuery,Site.productSlide);